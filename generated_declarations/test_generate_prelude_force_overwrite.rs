pub fn test_generate_prelude_force_overwrite () -> Result < () > { let dir = tempdir () ? ; let src_dir = dir . path () . join ("src") ; fs :: create_dir (& src_dir) ? ; let prelude_path = src_dir . join ("prelude.rs") ; fs :: write (& prelude_path , "// Original content") ? ; let new_prelude_content = "// New prelude content" ; generate_prelude :: generate_prelude (& src_dir , new_prelude_content , false , true) ? ; if ! prelude_path . exists () { :: core :: panicking :: panic ("assertion failed: prelude_path.exists()") } match (& fs :: read_to_string (& prelude_path) ? , & new_prelude_content) { (left_val , right_val) => { if ! (* left_val == * right_val) { let kind = :: core :: panicking :: AssertKind :: Eq ; :: core :: panicking :: assert_failed (kind , & * left_val , & * right_val , :: core :: option :: Option :: None ,) ; } } } ; Ok (()) }