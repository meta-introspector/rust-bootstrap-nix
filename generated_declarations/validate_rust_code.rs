pub async fn validate_rust_code (file_path : & PathBuf) -> anyhow :: Result < () > { let output = Command :: new ("rustc") . arg ("--emit=metadata") . arg ("--crate-type=lib") . arg (file_path) . output () . await . context ("Failed to execute rustc") ? ; if ! output . status . success () { let stderr = String :: from_utf8_lossy (& output . stderr) ; return :: anyhow :: __private :: Err (:: anyhow :: Error :: msg (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("Rustc check failed for file {0:?}:\n{1}" , file_path , stderr ,) ,) }) ,) ,) ; } Ok (()) }