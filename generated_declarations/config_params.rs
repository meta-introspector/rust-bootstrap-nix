mod config_params { use crate :: prelude :: * ; # [doc = " Struct to hold all configuration parameters for generating config.toml."] # [command (version , about , long_about = None)] pub struct ConfigParams { # [doc = " The bootstrap stage number (e.g., 0, 1, 2)"] # [arg ()] pub stage : String , # [doc = " The target triple for the build (e.g., aarch64-unknown-linux-gnu)"] # [arg ()] pub target : String , # [doc = " Path to the nixpkgs flake input"] # [arg (long)] pub nixpkgs_path : PathBuf , # [doc = " Path to the rust-overlay flake input"] # [arg (long)] pub rust_overlay_path : PathBuf , # [doc = " Path to the configurationNix flake input"] # [arg (long)] pub configuration_nix_path : PathBuf , # [doc = " Path to the rustSrcFlake input"] # [arg (long)] pub rust_src_flake_path : PathBuf , # [doc = " The flake reference for the rust-bootstrap-nix repository"] # [arg (long)] pub rust_bootstrap_nix_flake_ref : String , # [doc = " The flake reference for the rust source"] # [arg (long)] pub rust_src_flake_ref : String , } # [automatically_derived] # [allow (unused_qualifications , clippy :: redundant_locals)] impl clap :: Parser for ConfigParams { } # [allow (dead_code , unreachable_code , unused_variables , unused_braces , unused_qualifications ,)] # [allow (clippy :: style , clippy :: complexity , clippy :: pedantic , clippy :: restriction , clippy :: perf , clippy :: deprecated , clippy :: nursery , clippy :: cargo , clippy :: suspicious_else_formatting , clippy :: almost_swapped , clippy :: redundant_locals ,)] # [automatically_derived] impl clap :: CommandFactory for ConfigParams { fn command < 'b > () -> clap :: Command { let __clap_app = clap :: Command :: new ("configuration-nix") ; < Self as clap :: Args > :: augment_args (__clap_app) } fn command_for_update < 'b > () -> clap :: Command { let __clap_app = clap :: Command :: new ("configuration-nix") ; < Self as clap :: Args > :: augment_args_for_update (__clap_app) } } # [allow (dead_code , unreachable_code , unused_variables , unused_braces , unused_qualifications ,)] # [allow (clippy :: style , clippy :: complexity , clippy :: pedantic , clippy :: restriction , clippy :: perf , clippy :: deprecated , clippy :: nursery , clippy :: cargo , clippy :: suspicious_else_formatting , clippy :: almost_swapped , clippy :: redundant_locals ,)] # [automatically_derived] impl clap :: FromArgMatches for ConfigParams { fn from_arg_matches (__clap_arg_matches : & clap :: ArgMatches ,) -> :: std :: result :: Result < Self , clap :: Error > { Self :: from_arg_matches_mut (& mut __clap_arg_matches . clone ()) } fn from_arg_matches_mut (__clap_arg_matches : & mut clap :: ArgMatches ,) -> :: std :: result :: Result < Self , clap :: Error > { # ! [allow (deprecated)] let v = ConfigParams { stage : __clap_arg_matches . remove_one :: < String > ("stage") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: stage" ,)) ? , target : __clap_arg_matches . remove_one :: < String > ("target") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: target" ,)) ? , nixpkgs_path : __clap_arg_matches . remove_one :: < PathBuf > ("nixpkgs_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: nixpkgs_path" ,)) ? , rust_overlay_path : __clap_arg_matches . remove_one :: < PathBuf > ("rust_overlay_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_overlay_path" ,)) ? , configuration_nix_path : __clap_arg_matches . remove_one :: < PathBuf > ("configuration_nix_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: configuration_nix_path" ,)) ? , rust_src_flake_path : __clap_arg_matches . remove_one :: < PathBuf > ("rust_src_flake_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_src_flake_path" ,)) ? , rust_bootstrap_nix_flake_ref : __clap_arg_matches . remove_one :: < String > ("rust_bootstrap_nix_flake_ref") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_bootstrap_nix_flake_ref" ,)) ? , rust_src_flake_ref : __clap_arg_matches . remove_one :: < String > ("rust_src_flake_ref") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_src_flake_ref" ,)) ? , } ; :: std :: result :: Result :: Ok (v) } fn update_from_arg_matches (& mut self , __clap_arg_matches : & clap :: ArgMatches ,) -> :: std :: result :: Result < () , clap :: Error > { self . update_from_arg_matches_mut (& mut __clap_arg_matches . clone ()) } fn update_from_arg_matches_mut (& mut self , __clap_arg_matches : & mut clap :: ArgMatches ,) -> :: std :: result :: Result < () , clap :: Error > { # ! [allow (deprecated)] if __clap_arg_matches . contains_id ("stage") { # [allow (non_snake_case)] let stage = & mut self . stage ; * stage = __clap_arg_matches . remove_one :: < String > ("stage") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: stage" ,)) ? ; } if __clap_arg_matches . contains_id ("target") { # [allow (non_snake_case)] let target = & mut self . target ; * target = __clap_arg_matches . remove_one :: < String > ("target") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: target" ,)) ? ; } if __clap_arg_matches . contains_id ("nixpkgs_path") { # [allow (non_snake_case)] let nixpkgs_path = & mut self . nixpkgs_path ; * nixpkgs_path = __clap_arg_matches . remove_one :: < PathBuf > ("nixpkgs_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: nixpkgs_path" ,)) ? ; } if __clap_arg_matches . contains_id ("rust_overlay_path") { # [allow (non_snake_case)] let rust_overlay_path = & mut self . rust_overlay_path ; * rust_overlay_path = __clap_arg_matches . remove_one :: < PathBuf > ("rust_overlay_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_overlay_path" ,)) ? ; } if __clap_arg_matches . contains_id ("configuration_nix_path") { # [allow (non_snake_case)] let configuration_nix_path = & mut self . configuration_nix_path ; * configuration_nix_path = __clap_arg_matches . remove_one :: < PathBuf > ("configuration_nix_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: configuration_nix_path" ,)) ? ; } if __clap_arg_matches . contains_id ("rust_src_flake_path") { # [allow (non_snake_case)] let rust_src_flake_path = & mut self . rust_src_flake_path ; * rust_src_flake_path = __clap_arg_matches . remove_one :: < PathBuf > ("rust_src_flake_path") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_src_flake_path" ,)) ? ; } if __clap_arg_matches . contains_id ("rust_bootstrap_nix_flake_ref") { # [allow (non_snake_case)] let rust_bootstrap_nix_flake_ref = & mut self . rust_bootstrap_nix_flake_ref ; * rust_bootstrap_nix_flake_ref = __clap_arg_matches . remove_one :: < String > ("rust_bootstrap_nix_flake_ref") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_bootstrap_nix_flake_ref" ,)) ? ; } if __clap_arg_matches . contains_id ("rust_src_flake_ref") { # [allow (non_snake_case)] let rust_src_flake_ref = & mut self . rust_src_flake_ref ; * rust_src_flake_ref = __clap_arg_matches . remove_one :: < String > ("rust_src_flake_ref") . ok_or_else (| | clap :: Error :: raw (clap :: error :: ErrorKind :: MissingRequiredArgument , "the following required argument was not provided: rust_src_flake_ref" ,)) ? ; } :: std :: result :: Result :: Ok (()) } } # [allow (dead_code , unreachable_code , unused_variables , unused_braces , unused_qualifications ,)] # [allow (clippy :: style , clippy :: complexity , clippy :: pedantic , clippy :: restriction , clippy :: perf , clippy :: deprecated , clippy :: nursery , clippy :: cargo , clippy :: suspicious_else_formatting , clippy :: almost_swapped , clippy :: redundant_locals ,)] # [automatically_derived] impl clap :: Args for ConfigParams { fn group_id () -> Option < clap :: Id > { Some (clap :: Id :: from ("ConfigParams")) } fn augment_args < 'b > (__clap_app : clap :: Command) -> clap :: Command { { let __clap_app = __clap_app . group (clap :: ArgGroup :: new ("ConfigParams") . multiple (true) . args ({ let members : [clap :: Id ; 8usize] = [clap :: Id :: from ("stage") , clap :: Id :: from ("target") , clap :: Id :: from ("nixpkgs_path") , clap :: Id :: from ("rust_overlay_path") , clap :: Id :: from ("configuration_nix_path") , clap :: Id :: from ("rust_src_flake_path") , clap :: Id :: from ("rust_bootstrap_nix_flake_ref") , clap :: Id :: from ("rust_src_flake_ref") ,] ; members }) ,) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("stage") . value_name ("STAGE") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The bootstrap stage number (e.g., 0, 1, 2)") . long_help (None) ; let arg = arg ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("target") . value_name ("TARGET") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The target triple for the build (e.g., aarch64-unknown-linux-gnu)" ,) . long_help (None) ; let arg = arg ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("nixpkgs_path") . value_name ("NIXPKGS_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the nixpkgs flake input") . long_help (None) . long ("nixpkgs-path") ; let arg = arg ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_overlay_path") . value_name ("RUST_OVERLAY_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the rust-overlay flake input") . long_help (None) . long ("rust-overlay-path") ; let arg = arg ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("configuration_nix_path") . value_name ("CONFIGURATION_NIX_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the configurationNix flake input") . long_help (None) . long ("configuration-nix-path") ; let arg = arg ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_src_flake_path") . value_name ("RUST_SRC_FLAKE_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the rustSrcFlake input") . long_help (None) . long ("rust-src-flake-path") ; let arg = arg ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_bootstrap_nix_flake_ref") . value_name ("RUST_BOOTSTRAP_NIX_FLAKE_REF") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The flake reference for the rust-bootstrap-nix repository" ,) . long_help (None) . long ("rust-bootstrap-nix-flake-ref") ; let arg = arg ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_src_flake_ref") . value_name ("RUST_SRC_FLAKE_REF") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The flake reference for the rust source") . long_help (None) . long ("rust-src-flake-ref") ; let arg = arg ; arg }) ; __clap_app . about ("Struct to hold all configuration parameters for generating config.toml" ,) . long_about (None) . version ("0.1.0") . long_about (None) } } fn augment_args_for_update < 'b > (__clap_app : clap :: Command) -> clap :: Command { { let __clap_app = __clap_app . group (clap :: ArgGroup :: new ("ConfigParams") . multiple (true) . args ({ let members : [clap :: Id ; 8usize] = [clap :: Id :: from ("stage") , clap :: Id :: from ("target") , clap :: Id :: from ("nixpkgs_path") , clap :: Id :: from ("rust_overlay_path") , clap :: Id :: from ("configuration_nix_path") , clap :: Id :: from ("rust_src_flake_path") , clap :: Id :: from ("rust_bootstrap_nix_flake_ref") , clap :: Id :: from ("rust_src_flake_ref") ,] ; members }) ,) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("stage") . value_name ("STAGE") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The bootstrap stage number (e.g., 0, 1, 2)") . long_help (None) ; let arg = arg . required (false) ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("target") . value_name ("TARGET") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The target triple for the build (e.g., aarch64-unknown-linux-gnu)" ,) . long_help (None) ; let arg = arg . required (false) ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("nixpkgs_path") . value_name ("NIXPKGS_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the nixpkgs flake input") . long_help (None) . long ("nixpkgs-path") ; let arg = arg . required (false) ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_overlay_path") . value_name ("RUST_OVERLAY_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the rust-overlay flake input") . long_help (None) . long ("rust-overlay-path") ; let arg = arg . required (false) ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("configuration_nix_path") . value_name ("CONFIGURATION_NIX_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the configurationNix flake input") . long_help (None) . long ("configuration-nix-path") ; let arg = arg . required (false) ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_src_flake_path") . value_name ("RUST_SRC_FLAKE_PATH") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < PathBuf , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("Path to the rustSrcFlake input") . long_help (None) . long ("rust-src-flake-path") ; let arg = arg . required (false) ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_bootstrap_nix_flake_ref") . value_name ("RUST_BOOTSTRAP_NIX_FLAKE_REF") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The flake reference for the rust-bootstrap-nix repository" ,) . long_help (None) . long ("rust-bootstrap-nix-flake-ref") ; let arg = arg . required (false) ; arg }) ; let __clap_app = __clap_app . arg ({ # [allow (deprecated)] let arg = clap :: Arg :: new ("rust_src_flake_ref") . value_name ("RUST_SRC_FLAKE_REF") . required (true && clap :: ArgAction :: Set . takes_values ()) . value_parser ({ use :: clap_builder :: builder :: impl_prelude :: * ; let auto = :: clap_builder :: builder :: _infer_ValueParser_for :: < String , > :: new () ; (& & & & & & auto) . value_parser () }) . action (clap :: ArgAction :: Set) ; let arg = arg . help ("The flake reference for the rust source") . long_help (None) . long ("rust-src-flake-ref") ; let arg = arg . required (false) ; arg }) ; __clap_app . about ("Struct to hold all configuration parameters for generating config.toml" ,) . long_about (None) . version ("0.1.0") . long_about (None) } } } # [automatically_derived] impl :: core :: fmt :: Debug for ConfigParams { # [inline] fn fmt (& self , f : & mut :: core :: fmt :: Formatter) -> :: core :: fmt :: Result { let names : & 'static _ = & ["stage" , "target" , "nixpkgs_path" , "rust_overlay_path" , "configuration_nix_path" , "rust_src_flake_path" , "rust_bootstrap_nix_flake_ref" , "rust_src_flake_ref" ,] ; let values : & [& dyn :: core :: fmt :: Debug] = & [& self . stage , & self . target , & self . nixpkgs_path , & self . rust_overlay_path , & self . configuration_nix_path , & self . rust_src_flake_path , & self . rust_bootstrap_nix_flake_ref , & & self . rust_src_flake_ref ,] ; :: core :: fmt :: Formatter :: debug_struct_fields_finish (f , "ConfigParams" , names , values ,) } } }