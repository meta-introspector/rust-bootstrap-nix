pub fn commit_files (repo_path : & str , files : & [& str] , message : & str ,) -> Result < () > { let repo = Repository :: open (repo_path) ? ; let mut index = repo . index () ? ; for file in files { index . add_path (std :: path :: Path :: new (file)) ? ; } index . write () ? ; let oid = index . write_tree () ? ; let tree = repo . find_tree (oid) ? ; let signature = Signature :: now ("bootstrap-config-generator" , "bootstrap-config-generator@example.com" ,) ? ; let parent_commit = repo . head () ? . peel_to_commit () ? ; repo . commit (Some ("HEAD") , & signature , & signature , message , & tree , & [& parent_commit] ,) ? ; Ok (()) }