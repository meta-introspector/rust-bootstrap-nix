# [doc = " Generates a markdown report of the file processing results."] pub fn generate_report (results : & [FileProcessingResult]) -> Result < () > { let mut report_content = String :: new () ; report_content . push_str ("# Prelude Generation Summary Report\n\n") ; report_content . push_str ("This report summarizes the processing of Rust files during prelude generation.\n\n" ,) ; let total_files = results . len () ; let successful_files = results . iter () . filter (| r | { # [allow (non_exhaustive_omitted_patterns)] match r . status { FileProcessingStatus :: Success => true , _ => false , } }) . count () ; let skipped_files = results . iter () . filter (| r | { # [allow (non_exhaustive_omitted_patterns)] match r . status { FileProcessingStatus :: Skipped { .. } => true , _ => false , } }) . count () ; let failed_files = results . iter () . filter (| r | { # [allow (non_exhaustive_omitted_patterns)] match r . status { FileProcessingStatus :: Failed { .. } => true , _ => false , } }) . count () ; report_content . push_str ("## Summary\n") ; report_content . push_str (& :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("- Total files processed: {0}\n" , total_files) ,) }) ,) ; report_content . push_str (& :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("- Successfully processed: {0}\n" , successful_files) ,) }) ,) ; report_content . push_str (& :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("- Skipped: {0}\n" , skipped_files)) }) ,) ; report_content . push_str (& :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("- Failed: {0}\n\n" , failed_files)) }) ,) ; if ! results . is_empty () { report_content . push_str ("## Detailed Results\n") ; for result in results { report_content . push_str (& :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("### {0}\n" , result . path . display ()) ,) }) ,) ; match & result . status { FileProcessingStatus :: Success => { report_content . push_str ("- Status: ✅ Successfully Processed\n\n") ; } FileProcessingStatus :: Skipped { reason } => { report_content . push_str (& :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("- Status: ⏭\u{fe0f} Skipped (Reason: {0}\n\n" , reason ,) ,) }) ,) ; } FileProcessingStatus :: Failed { error } => { report_content . push_str (& :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("- Status: ❌ Failed (Error: {0}\n\n" , error) ,) }) ,) ; } } } } fs :: write ("prelude_generator_summary.md" , report_content) ? ; { :: std :: io :: _print (format_args ! ("Report generated: prelude_generator_summary.md\n") ,) ; } ; Ok (()) }