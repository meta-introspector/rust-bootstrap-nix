# [doc = " The configuration and the haystack to use for an Aho-Corasick search."] # [doc = ""] # [doc = " When executing a search, there are a few parameters one might want to"] # [doc = " configure:"] # [doc = ""] # [doc = " * The haystack to search, provided to the [`Input::new`] constructor. This"] # [doc = " is the only required parameter."] # [doc = " * The span _within_ the haystack to limit a search to. (The default"] # [doc = " is the entire haystack.) This is configured via [`Input::span`] or"] # [doc = " [`Input::range`]."] # [doc = " * Whether to run an unanchored (matches can occur anywhere after the"] # [doc = " start of the search) or anchored (matches can only occur beginning at"] # [doc = " the start of the search) search. Unanchored search is the default. This is"] # [doc = " configured via [`Input::anchored`]."] # [doc = " * Whether to quit the search as soon as a match has been found, regardless"] # [doc = " of the [`MatchKind`] that the searcher was built with. This is configured"] # [doc = " via [`Input::earliest`]."] # [doc = ""] # [doc = " For most cases, the defaults for all optional parameters are appropriate."] # [doc = " The utility of this type is that it keeps the default or common case simple"] # [doc = " while permitting tweaking parameters in more niche use cases while reusing"] # [doc = " the same search APIs."] # [doc = ""] # [doc = " # Valid bounds and search termination"] # [doc = ""] # [doc = " An `Input` permits setting the bounds of a search via either"] # [doc = " [`Input::span`] or [`Input::range`]. The bounds set must be valid, or"] # [doc = " else a panic will occur. Bounds are valid if and only if:"] # [doc = ""] # [doc = " * The bounds represent a valid range into the input's haystack."] # [doc = " * **or** the end bound is a valid ending bound for the haystack *and*"] # [doc = " the start bound is exactly one greater than the end bound."] # [doc = ""] # [doc = " In the latter case, [`Input::is_done`] will return true and indicates any"] # [doc = " search receiving such an input should immediately return with no match."] # [doc = ""] # [doc = " Other than representing \"search is complete,\" the `Input::span` and"] # [doc = " `Input::range` APIs are never necessary. Instead, callers can slice the"] # [doc = " haystack instead, e.g., with `&haystack[start..end]`. With that said, they"] # [doc = " can be more convenient than slicing because the match positions reported"] # [doc = " when using `Input::span` or `Input::range` are in terms of the original"] # [doc = " haystack. If you instead use `&haystack[start..end]`, then you'll need to"] # [doc = " add `start` to any match position returned in order for it to be a correct"] # [doc = " index into `haystack`."] # [doc = ""] # [doc = " # Example: `&str` and `&[u8]` automatically convert to an `Input`"] # [doc = ""] # [doc = " There is a `From<&T> for Input` implementation for all `T: AsRef<[u8]>`."] # [doc = " Additionally, the [`AhoCorasick`](crate::AhoCorasick) search APIs accept"] # [doc = " a `Into<Input>`. These two things combined together mean you can provide"] # [doc = " things like `&str` and `&[u8]` to search APIs when the defaults are"] # [doc = " suitable, but also an `Input` when they're not. For example:"] # [doc = ""] # [doc = " ```"] # [doc = " use aho_corasick::{AhoCorasick, Anchored, Input, Match, StartKind};"] # [doc = ""] # [doc = " // Build a searcher that supports both unanchored and anchored modes."] # [doc = " let ac = AhoCorasick::builder()"] # [doc = "     .start_kind(StartKind::Both)"] # [doc = "     .build(&[\"abcd\", \"b\"])"] # [doc = "     .unwrap();"] # [doc = " let haystack = \"abcd\";"] # [doc = ""] # [doc = " // A search using default parameters is unanchored. With standard"] # [doc = " // semantics, this finds `b` first."] # [doc = " assert_eq!("] # [doc = "     Some(Match::must(1, 1..2)),"] # [doc = "     ac.find(haystack),"] # [doc = " );"] # [doc = " // Using the same 'find' routine, we can provide an 'Input' explicitly"] # [doc = " // that is configured to do an anchored search. Since 'b' doesn't start"] # [doc = " // at the beginning of the search, it is not reported as a match."] # [doc = " assert_eq!("] # [doc = "     Some(Match::must(0, 0..4)),"] # [doc = "     ac.find(Input::new(haystack).anchored(Anchored::Yes)),"] # [doc = " );"] # [doc = " ```"] pub struct Input < 'h > { haystack : & 'h [u8] , span : Span , anchored : Anchored , earliest : bool , }