# [doc = " Recursively extracts test functions from a list of AST items."] fn extract_test_functions_from_items (items : Vec < Item > , file_path : & Path ,) -> Vec < TestInfo > { let mut test_functions = Vec :: new () ; for item in items { match item { Item :: Fn (func) => { if func . attrs . iter () . any (| attr | attr . path () . is_ident ("test")) { test_functions . push (TestInfo { name : func . sig . ident . to_string () , file_path : file_path . to_path_buf () , }) ; } } Item :: Mod (module) => { if let Some ((_ , module_items)) = module . content { test_functions . extend (extract_test_functions_from_items (module_items , file_path) ,) ; } } _ => { } } } test_functions }