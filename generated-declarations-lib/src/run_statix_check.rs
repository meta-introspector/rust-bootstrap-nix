pub fn run_statix_check (absolute_output_dir : & PathBuf , output_flake_nix_path : & PathBuf ,) -> Result < () , Box < dyn std :: error :: Error > > { { :: std :: io :: _print (format_args ! ("Running statix check on generated flake...\n") ,) ; } ; let statix_output = Command :: new ("nix-shell") . arg ("-p") . arg ("statix") . arg ("--run") . arg (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("statix check {0}" , output_flake_nix_path . display ()) ,) }) ,) . current_dir (absolute_output_dir) . output () ? ; if ! statix_output . status . success () { { :: std :: io :: _eprint (format_args ! ("Statix check failed!\n")) ; } ; { :: std :: io :: _eprint (format_args ! ("Stdout: {0}\n" , String :: from_utf8_lossy (& statix_output . stdout) ,) ,) ; } ; { :: std :: io :: _eprint (format_args ! ("Stderr: {0}\n" , String :: from_utf8_lossy (& statix_output . stderr) ,) ,) ; } ; return Err ("Statix check failed" . into ()) ; } { :: std :: io :: _print (format_args ! ("Statix check passed.\n")) ; } ; Ok (()) }