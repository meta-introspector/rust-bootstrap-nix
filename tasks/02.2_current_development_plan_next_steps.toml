title = "Next Steps"
description = "Refine `split-expanded-lib`'s `get_identifier`: Status: Completed as part of recent fixes. Ensure that `Declaration::get_identifier()` correctly handles all cases, especially those with problematic characters or keywords, to produce valid Rust module names. Error Handling and Reporting: Improve error handling and reporting in `rust-system-composer`, especially for issues during file processing or project generation. Integrate `flake-template-generator` as a library: Goal: Generate a `flake.nix` for each project using `flake-template-generator`'s library functionality. Actions: Add `flake-template-generator` as a dependency to `rust-system-composer/Cargo.toml`. Identify the relevant public functions in `flake-template-generator` for generating a `flake.nix`. Modify `rust-system-composer/src/main.rs` to call these library functions after the Rust project structure is in place. This will involve passing parameters like `project_dir`, `project_name`, and potentially other Nix-specific configurations. Define Monadic I/O Traits and Arrow Composition: Goal: Create a new crate (e.g., `monadic-io-traits`) that defines generic traits for monadic I/O operations and arrow composition, drawing inspiration from `functional_arrow_best_practices.md`. Actions: Create a new library crate `monadic-io-traits` in the workspace. Define traits like `Monad`, `Applicative`, `Functor`, `Arrow`, `Category` (if not already present in `pipeline-traits` or similar). Define associated types for input, output, and error handling. Implement basic combinators for these traits. Add `monadic-io-traits` as a dependency to `rust-system-composer` and potentially to the generated projects if they need to implement these traits. Refactor `rust-system-composer` to use Monadic I/O: Goal: Modify `rust-system-composer`'s I/O operations (file reading, writing, external command execution) to use the newly defined monadic I/O traits. Actions: Identify I/O-bound operations within `rust-system-composer`. Wrap these operations in types that implement the `Monad` or `Arrow` traits. Use combinators to compose these I/O operations. This will make `rust-system-composer` itself more robust and functional. Generate Projects with Monadic I/O Integration: Goal: Ensure that the generated projects can easily integrate with the monadic I/O framework. Actions: Modify the `Cargo.toml` generation in `rust-system-composer` to include `monadic-io-traits` as a dependency for generated projects. Potentially generate boilerplate code in `lib.rs` or other files within the generated projects to facilitate the use of monadic I/O for their specific functionalities. Implement Bag of Words and Coordinate Grouping for Declarations: Goal: Enhance `prelude-generator` to collect a "bag of words" (referenced types, functions, external identifiers) for each declaration and group these declarations into "coordinates" (modules) aiming for ~4KB chunks. Actions: Enhanced `DeclsVisitor` to collect referenced types, functions, and external identifiers. Introduced a `Declaration` struct to unify declaration representation with associated "bag of words." Implement grouping logic to create ~4KB chunks based on declaration dependencies. Generate unique module paths for each group. Generate a "Canonical Prelude" file with `pub use` statements for all generated group modules. Establish a symbol table for primitives and module-based "lattices" to identify new terms. Refactor `prelude-generator/src/main.rs`: Action: The constant extraction calls have been integrated into `prelude-generator/src/main.rs`. Action: Split the `main.rs` file into separate functions for processing structs and constants to improve modularity and readability. Action: Ensure all internal calls within the extracted functions and the `main` function use the `prelude_generator::` prefix where necessary. Refine hierarchical directory structure for constants: Goal: Enhance the logic within the conceptual `write_numerical_constants_to_hierarchical_structure` and `write_string_constants_to_hierarchical_structure` functions (as documented in Markdown) to create actual sorted, hierarchical directories based on constant properties (e.g., hash, value prefixes), and ensure 4KB file blocking. Implement global index and 8D embedding for all constants: Goal: Develop a mechanism to create a central index (e.g., TOML/JSON) mapping constant names/paths to their 8D coordinates and other metadata, moving beyond the hardcoded 0 for string constants. Generate TOML report for Bag of Words: Goal: Implement the functionality to write the filtered bag of words to a TOML file, including the specified stop words. Refine `ClassifyUsesFunctor` (after `rust-system-composer` is functional): Goal: Leverage the statistical data from `ast-stats-crate::AST_STATISTICS` to inform and improve the classification logic within `prelude-generator::src::prelude_category_pipeline::prelude_category_pipeline_impls::classify_uses_functor.rs`. Details: Develop more sophisticated logic to analyze each `use` statement (and potentially other AST elements) against the statistical profiles (e.g., common patterns, typical lengths, version information). Populate the `git_details`, `nix_details`, `rust_details`, `cargo_details`, `syn_details`, `llvm_details`, and `linux_details` fields of the `UseStatement` struct based on this informed analysis. Refine `PreprocessFunctor` (if necessary): Review `PreprocessFunctor` to see if any preprocessing steps can be optimized or informed by the `AST_STATISTICS`. Utilize Generated Data for Self-Generation: Goal: Begin implementing the "Self-Generation" aspect of the `prelude-generator`, as outlined in `bootstrap.md`. Details: This will involve processing the classified `UseStatement` data (which now includes rich `git_details`, `nix_details`, etc.) to generate new code, configurations, or documentation. The exact nature of this generation will depend on the specific goals of the "better parsing" and "self-hosting" objectives."
dependencies = []
testing_strategy = "N/A (planning phase)"
associated_scripts_code = []
