use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub fn rev_exists (rev : & str , git_dir : Option < & Path >) -> Result < bool , String > { let mut git = Command :: new ("git") ; if let Some (git_dir) = git_dir { git . current_dir (git_dir) ; } git . args (["rev-parse" , rev]) ; let output = git . output () . map_err (| err | :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("{0:?}" , err)) })) ? ; match output . status . code () { Some (0) => Ok (true) , Some (128) => Ok (false) , None => { Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("git didn\'t exit properly: {0}" , String :: from_utf8 (output . stderr) . map_err (| err | :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("{0:?}" , err)) })) ?,) ,) }) ,) } Some (code) => { Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("git command exited with status code: {1}: {0}" , String :: from_utf8 (output . stderr) . map_err (| err | :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("{0:?}" , err)) })) ?, code ,) ,) }) ,) } } }