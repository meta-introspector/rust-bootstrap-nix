use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

# [doc = " A representation of a sparse NFA state for an Aho-Corasick automaton."] # [doc = ""] # [doc = " It contains the transitions to the next state, a failure transition for"] # [doc = " cases where there exists no other transition for the current input byte"] # [doc = " and the matches implied by visiting this state (if any)."] pub (crate) struct State { # [doc = " A pointer to `NFA::trans` corresponding to the head of a linked list"] # [doc = " containing all of the transitions for this state."] # [doc = ""] # [doc = " This is `StateID::ZERO` if and only if this state has zero transitions."] sparse : StateID , # [doc = " A pointer to a row of `N` transitions in `NFA::dense`. These"] # [doc = " transitions correspond precisely to what is obtained by traversing"] # [doc = " `sparse`, but permits constant time lookup."] # [doc = ""] # [doc = " When this is zero (which is true for most states in the default"] # [doc = " configuration), then this state has no dense representation."] # [doc = ""] # [doc = " Note that `N` is equal to `NFA::byte_classes::alphabet_len()`. This is"] # [doc = " typically much less than 256 (the maximum value)."] dense : StateID , # [doc = " A pointer to `NFA::matches` corresponding to the head of a linked list"] # [doc = " containing all of the matches for this state."] # [doc = ""] # [doc = " This is `StateID::ZERO` if and only if this state is not a match state."] matches : StateID , # [doc = " The state that should be transitioned to if the current byte in the"] # [doc = " haystack does not have a corresponding transition defined in this"] # [doc = " state."] fail : StateID , # [doc = " The depth of this state. Specifically, this is the distance from this"] # [doc = " state to the starting state. (For the special sentinel states DEAD and"] # [doc = " FAIL, their depth is always 0.) The depth of a starting state is 0."] # [doc = ""] # [doc = " Note that depth is currently not used in this non-contiguous NFA. It"] # [doc = " may in the future, but it is used in the contiguous NFA. Namely, it"] # [doc = " permits an optimization where states near the starting state have their"] # [doc = " transitions stored in a dense fashion, but all other states have their"] # [doc = " transitions stored in a sparse fashion. (This non-contiguous NFA uses"] # [doc = " a sparse representation for all states unconditionally.) In any case,"] # [doc = " this is really the only convenient place to compute and store this"] # [doc = " information, which we need when building the contiguous NFA."] depth : SmallIndex , }