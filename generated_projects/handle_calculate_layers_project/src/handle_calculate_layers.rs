use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub async fn handle_calculate_layers (project_root : & PathBuf , args : & crate :: Args ,) -> anyhow :: Result < () > { { :: std :: io :: _print (format_args ! ("Calculating type layers...\n")) ; } ; let type_map = type_extractor :: extract_bag_of_types (project_root , & args . filter_names ,) . await ? ; { :: std :: io :: _print (format_args ! ("\n--- Type Layer Analysis ---\n")) ; } ; { :: std :: io :: _print (format_args ! ("{0:<30} {1:<10} {2:<10}\n" , "Type" , "Count" , "Layer") ,) ; } ; { :: std :: io :: _print (format_args ! ("---------------------------------------------------\n") ,) ; } ; let mut sorted_types : Vec < (& String , & type_extractor :: TypeInfo) > = type_map . iter () . collect () ; sorted_types . sort_by (| a , b | b . 1 . count . cmp (& a . 1 . count)) ; for (type_name , info) in sorted_types . iter () { { :: std :: io :: _print (format_args ! ("{0:<30} {1:<10} {2:<10?}\n" , type_name , info . count , info . layer ,) ,) ; } ; } { :: std :: io :: _print (format_args ! ("---------------------------------------------------\n") ,) ; } ; Ok (()) }