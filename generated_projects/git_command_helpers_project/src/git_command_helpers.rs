use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub mod git_command_helpers { use crate :: prelude :: * ; # [doc = " Runs a git command and returns the output, handling errors."] pub fn run_git_command (current_dir : & Path , args : & [& str] , error_message : & str , dry_run : bool ,) -> Result < () > { { :: std :: io :: _print (format_args ! ("Running git command in CWD: {0:?}\n" , current_dir) ,) ; } ; let command_str = :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("git {0}" , args . join (" "))) }) ; if dry_run { { :: std :: io :: _print (format_args ! ("Dry run: Would execute: {0}\n" , command_str) ,) ; } ; return Ok (()) ; } { :: std :: io :: _print (format_args ! ("Executing: {0}\n" , command_str)) ; } ; let output = Command :: new ("git") . current_dir (current_dir) . args (args) . output () . with_context (| | :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("Failed to execute git command: {0}" , command_str) ,) })) ? ; if ! output . status . success () { return :: anyhow :: __private :: Err (:: anyhow :: Error :: msg (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("Git command failed: {0}\nStdout: {1}\nStderr: {2}" , error_message , String :: from_utf8_lossy (& output . stdout) , String :: from_utf8_lossy (& output . stderr) ,) ,) }) ,) ,) ; } Ok (()) } # [doc = " Runs a command and returns the stdout as a String."] pub fn output_result (cmd : & mut Command) -> Result < String > { let output = cmd . stderr (Stdio :: inherit ()) . output () . with_context (| | :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("Failed to run command: {0:?}" , cmd) ,) })) ? ; if ! output . status . success () { return :: anyhow :: __private :: Err (:: anyhow :: Error :: msg (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("Command did not execute successfully: {0:?}\nExpected success, got: {1}\nStderr: {2}" , cmd , output . status , String :: from_utf8_lossy (& output . stderr) ,) ,) }) ,) ,) ; } String :: from_utf8 (output . stdout) . with_context (| | "Failed to convert stdout to UTF-8" . to_string ()) } }