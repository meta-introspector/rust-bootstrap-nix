use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub mod parse_inner_toml { use crate :: prelude :: * ; pub fn parse_inner_toml (config : & mut ParsedConfig , flags : & LocalFlags , get_toml : impl Fn (& Path) -> Result < LocalTomlConfig , toml :: de :: Error > ,) -> LocalTomlConfig { let toml_path = flags . config . clone () . or_else (| | env :: var_os ("RUST_BOOTSTRAP_CONFIG") . map (PathBuf :: from)) ; let using_default_path = toml_path . is_none () ; let mut toml_path = toml_path . unwrap_or_else (| | PathBuf :: from ("config.toml")) ; if using_default_path && ! toml_path . exists () { toml_path = config . src . join (toml_path) ; } if ! using_default_path || toml_path . exists () { config . config = Some (if true { toml_path . canonicalize () . unwrap () } else { toml_path . clone () } ,) ; get_toml (& toml_path) . unwrap_or_else (| e | { { :: std :: io :: _eprint (format_args ! ("ERROR: Failed to parse \'{0}\': {1}\n" , toml_path . display () , e ,) ,) ; } ; std :: process :: exit (2) ; }) } else { config . config = None ; LocalTomlConfig :: default () } } }