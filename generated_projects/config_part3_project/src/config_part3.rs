use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub mod config_part3 { use crate :: TomlConfig ; use crate :: llvm :: Llvm ; # [doc = " Compares the current `Llvm` options against those in the CI LLVM builder and detects any incompatible options."] # [doc = " It does this by destructuring the `Llvm` instance to make sure every `Llvm` field is covered and not missing."] pub (crate) fn check_incompatible_options_for_ci_llvm (current_config_toml : TomlConfig , ci_config_toml : TomlConfig ,) -> Result < () , String > { let (Some (current_llvm_config) , Some (ci_llvm_config)) = (current_config_toml . llvm , ci_config_toml . llvm ,) else { return Ok (()) ; } ; let Llvm { optimize , thin_lto , release_debuginfo , assertions : _ , tests : _ , plugins , ccache : _ , static_libstdcpp : _ , libzstd , ninja : _ , targets , experimental_targets , link_jobs : _ , link_shared : _ , version_suffix , clang_cl , cflags , cxxflags , ldflags , use_libcxx , use_linker , allow_old_toolchain , offload , polly , clang , enable_warnings , download_ci_llvm : _ , build_config , enzyme , enable_projects : _ , } = ci_llvm_config ; if let Some (current) = & current_llvm_config . optimize { if Some (current) != optimize . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "optimize" . replace ("_" , "-") , current_llvm_config . optimize , if optimize . is_some () { "None/" } else { "" } , optimize ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . thin_lto { if Some (current) != thin_lto . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "thin_lto" . replace ("_" , "-") , current_llvm_config . thin_lto , if thin_lto . is_some () { "None/" } else { "" } , thin_lto ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . release_debuginfo { if Some (current) != release_debuginfo . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "release_debuginfo" . replace ("_" , "-") , current_llvm_config . release_debuginfo , if release_debuginfo . is_some () { "None/" } else { "" } , release_debuginfo ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . libzstd { if Some (current) != libzstd . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "libzstd" . replace ("_" , "-") , current_llvm_config . libzstd , if libzstd . is_some () { "None/" } else { "" } , libzstd ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . targets { if Some (current) != targets . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "targets" . replace ("_" , "-") , current_llvm_config . targets , if targets . is_some () { "None/" } else { "" } , targets ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . experimental_targets { if Some (current) != experimental_targets . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "experimental_targets" . replace ("_" , "-") , current_llvm_config . experimental_targets , if experimental_targets . is_some () { "None/" } else { "" } , experimental_targets ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . clang_cl { if Some (current) != clang_cl . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "clang_cl" . replace ("_" , "-") , current_llvm_config . clang_cl , if clang_cl . is_some () { "None/" } else { "" } , clang_cl ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . version_suffix { if Some (current) != version_suffix . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "version_suffix" . replace ("_" , "-") , current_llvm_config . version_suffix , if version_suffix . is_some () { "None/" } else { "" } , version_suffix ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . cflags { if Some (current) != cflags . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "cflags" . replace ("_" , "-") , current_llvm_config . cflags , if cflags . is_some () { "None/" } else { "" } , cflags ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . cxxflags { if Some (current) != cxxflags . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "cxxflags" . replace ("_" , "-") , current_llvm_config . cxxflags , if cxxflags . is_some () { "None/" } else { "" } , cxxflags ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . ldflags { if Some (current) != ldflags . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "ldflags" . replace ("_" , "-") , current_llvm_config . ldflags , if ldflags . is_some () { "None/" } else { "" } , ldflags ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . use_libcxx { if Some (current) != use_libcxx . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "use_libcxx" . replace ("_" , "-") , current_llvm_config . use_libcxx , if use_libcxx . is_some () { "None/" } else { "" } , use_libcxx ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . use_linker { if Some (current) != use_linker . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "use_linker" . replace ("_" , "-") , current_llvm_config . use_linker , if use_linker . is_some () { "None/" } else { "" } , use_linker ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . allow_old_toolchain { if Some (current) != allow_old_toolchain . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "allow_old_toolchain" . replace ("_" , "-") , current_llvm_config . allow_old_toolchain , if allow_old_toolchain . is_some () { "None/" } else { "" } , allow_old_toolchain ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . offload { if Some (current) != offload . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "offload" . replace ("_" , "-") , current_llvm_config . offload , if offload . is_some () { "None/" } else { "" } , offload ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . polly { if Some (current) != polly . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "polly" . replace ("_" , "-") , current_llvm_config . polly , if polly . is_some () { "None/" } else { "" } , polly ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . clang { if Some (current) != clang . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "clang" . replace ("_" , "-") , current_llvm_config . clang , if clang . is_some () { "None/" } else { "" } , clang ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . build_config { if Some (current) != build_config . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "build_config" . replace ("_" , "-") , current_llvm_config . build_config , if build_config . is_some () { "None/" } else { "" } , build_config ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . plugins { if Some (current) != plugins . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "plugins" . replace ("_" , "-") , current_llvm_config . plugins , if plugins . is_some () { "None/" } else { "" } , plugins ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . enzyme { if Some (current) != enzyme . as_ref () { return Err (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("ERROR: Setting `llvm.{0}` is incompatible with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}" , "enzyme" . replace ("_" , "-") , current_llvm_config . enzyme , if enzyme . is_some () { "None/" } else { "" } , enzyme ,) ,) }) ,) ; } } if let Some (current) = & current_llvm_config . enable_warnings { if Some (current) != enable_warnings . as_ref () { { :: std :: io :: _print (format_args ! ("WARNING: `llvm.{0}` has no effect with `llvm.download-ci-llvm`. Current value: {1:?}, Expected value(s): {2}{3:?}\n" , "enable_warnings" . replace ("_" , "-") , current_llvm_config . enable_warnings , if enable_warnings . is_some () { "None/" } else { "" } , enable_warnings ,) ,) ; } ; } } Ok (()) } }