use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub mod inspect_functor { use anyhow :: Result ; use std :: fmt :: Debug ; use std :: pin :: Pin ; use std :: future :: Future ; use std :: boxed :: Box ; use pipeline_traits :: PipelineFunctor ; pub struct InspectFunctor < 'a , T : Debug > { label : & 'a str , _phantom : std :: marker :: PhantomData < T > , } impl < 'a , T : Debug > InspectFunctor < 'a , T > { pub fn new (label : & 'a str) -> Self { InspectFunctor { label , _phantom : std :: marker :: PhantomData , } } } impl < 'a , T : Debug + Clone + Send + Sync + 'static > PipelineFunctor < T , T > for InspectFunctor < 'a , T > { fn map < 'writer > (& 'writer self , writer : & 'writer mut (impl tokio :: io :: AsyncWriteExt + Unpin + Send) , input : T ,) -> Pin < Box < dyn Future < Output = Result < T > > + Send + 'writer > > { Box :: pin (async move { writer . write_all (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("--- Inspecting: {0} ---\n" , self . label) ,) }) . as_bytes () ,) . await ? ; writer . write_all (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("{0:#?}\n" , input)) }) . as_bytes () ,) . await ? ; Ok (input) }) } } }