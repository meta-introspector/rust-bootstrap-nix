use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub mod nix_eval_utils { use crate :: prelude :: * ; pub fn run_nix_eval (expr : & str) -> Result < String > { let mut command = Command :: new ("nix") ; command . args (& ["eval" , "--raw" , "--extra-experimental-features" , "nix-command flakes" , "--expr" , expr ,] ,) ; { { let lvl = :: log :: Level :: Debug ; if lvl <= :: log :: STATIC_MAX_LEVEL && lvl <= :: log :: max_level () { :: log :: __private_api :: log ({ :: log :: __private_api :: GlobalLogger } , format_args ! ("Executing Nix eval command: {0:?}" , command) , lvl , & ("bootstrap_config_builder::utils::nix_eval_utils" , "bootstrap_config_builder::utils::nix_eval_utils" , :: log :: __private_api :: loc () ,) , () ,) ; } } } ; let output = command . output () . with_context (| | { :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("Failed to execute nix eval for expression: \'{0}\'" , expr ,) ,) }) }) ? ; if ! output . status . success () { return :: anyhow :: __private :: Err (:: anyhow :: Error :: msg (:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("Nix eval command failed for expression \'{0}\':\n{1}\nStderr: {2}" , expr , String :: from_utf8_lossy (& output . stdout) , String :: from_utf8_lossy (& output . stderr) ,) ,) }) ,) ,) ; } let stdout = String :: from_utf8 (output . stdout) ? . trim () . to_string () ; { { let lvl = :: log :: Level :: Debug ; if lvl <= :: log :: STATIC_MAX_LEVEL && lvl <= :: log :: max_level () { :: log :: __private_api :: log ({ :: log :: __private_api :: GlobalLogger } , format_args ! ("Nix eval stdout: {0}" , stdout) , lvl , & ("bootstrap_config_builder::utils::nix_eval_utils" , "bootstrap_config_builder::utils::nix_eval_utils" , :: log :: __private_api :: loc () ,) , () ,) ; } } } ; Ok (stdout) } }