use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

pub fn get_all_rustc_paths_from_nix_store () -> Result < Vec < (String , String) > > { { { let lvl = :: log :: Level :: Info ; if lvl <= :: log :: STATIC_MAX_LEVEL && lvl <= :: log :: max_level () { :: log :: __private_api :: log ({ :: log :: __private_api :: GlobalLogger } , format_args ! ("Executing: ls /nix/store/*/bin/rustc") , lvl , & ("bootstrap_config_builder::utils::get_all_rustc_paths_from_nix_store" , "bootstrap_config_builder::utils::get_all_rustc_paths_from_nix_store" , :: log :: __private_api :: loc () ,) , () ,) ; } } } ; let mut command = Command :: new ("sh") ; command . args (& ["-c" , "ls /nix/store/*/bin/rustc"]) ; let output = command . output () . with_context (| | "Failed to execute ls /nix/store/*/bin/rustc") ? ; if ! output . status . success () { { { let lvl = :: log :: Level :: Debug ; if lvl <= :: log :: STATIC_MAX_LEVEL && lvl <= :: log :: max_level () { :: log :: __private_api :: log ({ :: log :: __private_api :: GlobalLogger } , format_args ! ("ls /nix/store/*/bin/rustc failed:\n{0}\nStderr: {1}" , String :: from_utf8_lossy (& output . stdout) , String :: from_utf8_lossy (& output . stderr) ,) , lvl , & ("bootstrap_config_builder::utils::get_all_rustc_paths_from_nix_store" , "bootstrap_config_builder::utils::get_all_rustc_paths_from_nix_store" , :: log :: __private_api :: loc () ,) , () ,) ; } } } ; return Ok (Vec :: new ()) ; } let stdout = String :: from_utf8 (output . stdout) ? ; Ok (stdout . lines () . map (| s | { let path = s . trim () . to_string () ; let version = extract_rustc_version_from_path (& path) ; (path , version) }) . collect () ,) }