use std::collections::HashSet;
use split_expanded_lib::{DeclarationItem};

# [doc = " Returns the master branch from which we can take diffs to see changes."] # [doc = " This will usually be rust-lang/rust master, but sometimes this might not exist."] # [doc = " This could be because the user is updating their forked master branch using the GitHub UI"] # [doc = " and therefore doesn't need an upstream master branch checked out."] # [doc = " We will then fall back to origin/master in the hope that at least this exists."] pub fn updated_master_branch (config : & GitConfig < '_ > , git_dir : Option < & Path > ,) -> Result < String , String > { let upstream_remote = get_rust_lang_rust_remote (config , git_dir) ? ; let branch = config . nightly_branch ; for upstream_master in [:: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("{0}/{1}" , upstream_remote , branch)) }) , :: alloc :: __export :: must_use ({ :: alloc :: fmt :: format (format_args ! ("origin/{0}" , branch)) }) ,] { if rev_exists (& upstream_master , git_dir) ? { return Ok (upstream_master) ; } } Err ("Cannot find any suitable upstream master branch" . to_owned ()) }